---
- name: Bootstrap server
  hosts: servers
  remote_user: root
  gather_facts: true
  roles:
    - base # Install and configure fundamental packages
    - user # Set up a normal user to use the rest of the way

- name: Configure server
  hosts: servers
  remote_user: jpnance
  gather_facts: false
  roles:
    - docker # Install and configure Docker for use
    - chezmoi # Install and configure chezmoi for use
    - make-backups # Install and activate hourly backup system
    - ops # Install and activate ops scripts (deploy, up, add-app)
    - certs # Install certbot and SSL config files
    - nginx # Install nginx and default ACME vhost
